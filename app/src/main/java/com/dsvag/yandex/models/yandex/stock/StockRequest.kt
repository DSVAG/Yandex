package com.dsvag.yandex.models.yandex.stock

import com.dsvag.yandex.models.yandex.Operation
import com.squareup.moshi.Json
import com.squareup.moshi.JsonClass

@JsonClass(generateAdapter = true)
data class StockRequest(
    @Json(name = "operationName")
    val operationName: Operation = Operation.Instrument,

    @Json(name = "query")
    val query: String = "query Instrument(\$type:InstrumentType!,\$slug:String!,\$isBond:Boolean!,\$isEtf:Boolean!,\$isShare:Boolean!,\$bondSchoolQuestionId:ID!,\$hasBroker:Boolean!,\$hasIIS:Boolean!){tanker{SEO:keyset(name:\"SEO\"){data id}BubbleCases:keyset(name:\"BubbleCases\"){data id}QnA:keyset(name:\"QnA\"){data id}MoneyFundVTBM:keyset(name:\"MoneyFundVTBM\"){id data}}bunker{bubbleCases{ofz{key theme}vtbm{key theme}}}...Trade2 ...InstrumentBondData @include(if:\$isBond)...BondSchoolQuestionData @include(if:\$isBond)...InstrumentEtfData @include(if:\$isEtf)...InstrumentShareData @include(if:\$isShare)news{related(slug:\$slug){...NewsRelatedProps}}profile{hasHistory:hasHistoryBySlug(slug:\$slug)}instruments{index{...InstrumentMainConditionsData ...InstrumentMoneyFundCalculatorData}metaData:bySlug(slug:\$slug,type:\$type){... on EtfInstrumentItem{isin moneyFund{profability{percent}}}... on AnyInstrumentItem{id slug logoId type ticker taxFree exchange approved description displayName commissionFree issuer{sector country description displayName type}marketData{id price priceStep bidPrice askPrice timestamp currencyCode absoluteChange percentChange tradeOpen sessionOpen accruedInterest nextSessionStateChange noBrokerResult lotSize}}... on ShareInstrumentItem{isin listingExchange listingExchangeTicker}... on BondInstrumentItem{isin faceValue maturityDate issuer{type country}bondInfo{coupon{fixedPeriod{days perYear}payment{toDate nextDate allTimePayment payment{amount currencyCode}}}}}... on CurrencyInstrumentItem{assetCurrencyCode}}}}fragment Trade2 on Query{tanker{Trade:keyset(name:\"Trade\"){data id}}profile{cards{cardId maskedNumber paymentSystem}}instruments{metaData:bySlug(slug:\$slug,type:\$type){... on AnyInstrumentItem{id slug type ticker displayName approved exchange commissionFree marketData{id priceStep bidPrice askPrice currencyCode tradeOpen sessionOpen nextSessionStateChange lotSize}}... on CurrencyInstrumentItem{assetCurrencyCode}}}...PortfolioBalanceFragment}fragment PortfolioBalanceFragment on Query{brokerPortfolio:portfolio(agreementType:BROKER)@include(if:\$hasBroker){main{currency{id amount instrument{id slug assetCurrencyCode}}}position:positionBySlug(slug:\$slug){... on AnyPortfolioPosition{id amount}}}iisPortfolio:portfolio(agreementType:IIS)@include(if:\$hasIIS){main{currency{id amount instrument{id slug assetCurrencyCode}}}position:positionBySlug(slug:\$slug){... on AnyPortfolioPosition{id amount}}}}fragment InstrumentBondData on Query{tanker{InstrumentBond:keyset(name:\"InstrumentBond\"){data id}}state{ofAffairs{now refinancingRatePercent}}instruments{timeline:bondTimelineEventsBySlug(slug:\$slug){... on TimelineEvent{date eventType}... on TimelineMaturityEvent{maturity{price{amount currencyCode}}}... on TimelineOfferEvent{offer{buyDate endDate beginDate offerType price{amount currencyCode}}}... on TimelineCouponEvent{coupon{rate rateDate payment{amount currencyCode}}}... on TimelineCouponRecurrentEvent{recurrent{dates number lastDate}coupon{rate rateDate couponPeriod{days perYear}payment{amount currencyCode}}}}metaData:bySlug(slug:\$slug,type:\$type){... on AnyInstrumentItem{id slug type exchange approved displayName commissionFree issuer{type country displayName}marketData{id price askPrice timestamp tradeOpen sessionOpen currencyCode ownershipDate accruedInterest nextSessionStateChange bondYield{toDate annualYield allTimeYield}}}... on BondInstrumentItem{faceValue riskLevel bondTaxType maturityDate riskLevel bondRating{agencyRatings{agency category dateAward rating}}bondInfo{coupon{payment{toDate nextDate allTimePayment payment{amount currencyCode}minPayment fixedPayment}fixedPeriod{days perYear}}}}}}}fragment BondSchoolQuestionData on Query{tanker{QnA:keyset(name:\"QnA\"){data id}}school{questionById(id:\$bondSchoolQuestionId){id}}}fragment InstrumentEtfData on Query{tanker{InstrumentEtf:keyset(name:\"InstrumentEtf\"){data id}QnA:keyset(name:\"QnA\"){data id}}bunker{instruments{etf{etfcontentsoverrides{id:slug slug contents{id:name name weight color}}qna{id category}}}}instruments{metaData:bySlug(slug:\$slug,type:\$type){... on AnyInstrumentItem{id slug}... on EtfInstrumentItem{detailedEtfContents{slug type name weight}}}}}fragment InstrumentShareData on Query{tanker{InstrumentShare:keyset(name:\"InstrumentShare\"){data id}QnA:keyset(name:\"QnA\"){data id}}bunker{instruments{share{componentofqna{id category}}}}instruments{metaData:bySlug(slug:\$slug,type:\$type){... on AnyInstrumentItem{id displayName}... on ShareInstrumentItem{displayName componentOf{weight instrument{id slug displayName logoId}otherComponentNames}}}}}fragment NewsRelatedProps on NewsRelated{cursor hasMore items{...NewsItemProps}}fragment NewsItemProps on NewsItem{id title source content publicationDate}fragment InstrumentMainConditionsData on InstrumentsIndex{candles(slug:\"moexrepo\",limit:1){close}}fragment InstrumentMoneyFundCalculatorData on InstrumentsIndex{candles(slug:\"moexrepo\",limit:1){close}}",

    @Json(name = "variables")
    val variables: StockVariables
)